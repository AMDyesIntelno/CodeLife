## [欧拉函数 OI-WIKI](https://oi-wiki.org/math/euler/) ##

1.求单个数的欧拉函数

```c++
#include<iostream>
#include<cmath>
using namespace std;
int euler_phi(int n){/*求单个数的欧拉函数值*/
    int m=int(sqrt(n+0.5));
    int ans=n;
    for(int i=2;i<=m;++i){
        /*φ(x)=x(1-1/p(1))(1-1/p(2))(1-1/p(3))…..(1-1/p(n))*/
        if(n%i==0){/*判断i是否为n的质因数*/
            ans=ans/i*(i-1);/*先进行除法运算避免溢出*/
            /*ans/i*(i-1)=ans*(1-1/i)*/
            while(n%i==0){
                n/=i;/*保证n在遇到下一个质因数之前不会再进行计算*/
                /*假定n=20，n可由质因数累积而成，n=2*2*5
                  显然4为n的因数，但不是质因数，在该while循环中
                  4被除去，因此可以保证下一次运算必定为质因数*/
            }
        }
    }
    if(n>1){
        ans=ans/n*(n-1);/*最后剩下的一个质因数*/
        /*例如n=5，与n互质的数为1,2,3,4
          在上一步的for循环中没有符合条件的质因数
          说明n是质数，所以φ(n)=n-1
          又例如n=6，在上一步的for循环中只有2被筛出
          n=3，此时n为最后一个质因数
          φ(x)=x(1-1/p(1))(1-1/p(2))(1-1/p(3))…..(1-1/p(n))
          φ(x)=ans(1-1/p(n))
          综合两种情况将其写成ans=ans/n*(n-1)
          */
    }
    return ans;
}
int main(){
    int n;
    cin>>n;
    cout<<euler_phi(n);
    return 0;
}
```

2.筛法求欧拉函数
```c++
#include<iostream>
using namespace std;
int phi[1000001];
void phi_table(int n){
    phi[1]=1;
    /*φ(1)=1*/
    for(int i=2;i<=n;++i){
        if(!phi[i]){/*保证i是质因数*/
            for(int j=i;j<=n;j+=i){
                if(!phi[j]){
                    phi[j]=j;/*phi数组的元素与欧拉函数值一一对应*/
                }
                phi[j]=phi[j]/i*(i-1);/*i作为当前for循环中j的因数*/
                /*例如求6的欧拉函数时，以i=2作为j的循环，以i=3作为j的循环
                  在每一个循环中，当j=6时会以i作为质因数求解欧拉函数*/
                /*ans/i*(i-1)=ans*(1-1/i)*/
                /*φ(x)=x(1-1/p(1))(1-1/p(2))(1-1/p(3))…..(1-1/p(n))*/
            }
        }
    }
}
int main(){
    int n;
    cin>>n;
    phi_table(n);
    for(int i=1;i<=n;++i){
        cout<<phi[i]<<' ';
    }
    return 0;
}
```
